# CPG Configuration - Matched to hardware (Session 36)
# DO NOT MODIFY without updating simulation ScriptedGaitCfg/CPGCfg

# Gait timing
frequency_hz: 0.5        # Session 36: hardware-validated frequency
duty_cycle: 0.6          # Kept for compatibility (sin/cos gait ignores duty cycle)

# Leg trajectory angles (radians)
trajectory:
  swing_thigh: 0.54      # Session 36: -30.65 deg hardware -> +30.65 deg sim
  stance_thigh: 0.67     # Session 36: -38.15 deg hardware -> +38.15 deg sim
  stance_calf: -0.87     # Session 36: 50 deg hardware -> -50 deg sim
  swing_calf: -1.3963    # Session 36: 80 deg hardware -> -80 deg sim
  shoulder_amplitude: 0.0096  # Session 36: 0.55 deg hardware -> 0.0096 rad sim
  thigh_offset_front: 0.05    # Bias front thighs forward (rad)
  thigh_offset_back: -0.05    # Bias rear thighs back (rad)

# Residual learning
residual_scale: 0.05     # Low residual to preserve hardware gait

# Control loop
control:
  rate_hz: 20            # Control frequency (50ms period)
  action_filter_beta: 0.40  # Session 35: Optimal (0.50 too strong, 0.35 OK but 0.40 best)

# Joint action ranges (for scaling policy output)
joint_range:
  shoulder: 0.30         # ±0.30 rad from default
  thigh: 0.90            # ±0.90 rad from default
  calf: 0.90             # ±0.90 rad from default

# Default joint positions - TWO CONVENTIONS
# Hardware convention: what the servo encoders read at rest
# RL convention: what the simulation training used
# The relationship: hw = hw_default + (rl - rl_default) * joint_sign

# Hardware default pose (servo encoder readings at athletic stance)
hw_default_pose:
  shoulders: 0.0         # All shoulders at 0 rad
  thighs: 0.40           # Tuned stance: foot under shoulder
  calves: -0.74          # Tuned stance: foot under shoulder

# RL default pose (simulation training convention)
rl_default_pose:
  shoulder_fl: 0.0       # Match sim default pose
  shoulder_fr: 0.0
  shoulder_bl: 0.0
  shoulder_br: 0.0
  thighs: 0.60           # Tuned stance: foot under shoulder
  calves: -1.40          # Tuned stance: foot under shoulder

# Joint sign for convention conversion (RL <-> Hardware)
# Multiply relative positions by this to convert: rl_rel = hw_rel * joint_sign
joint_sign:
  shoulders: [1.0, -1.0, 1.0, -1.0]  # FL, FR, BL, BR (mirror right side)
  thighs: -1.0           # Inverted
  calves: -1.0           # Inverted
