# CPG Configuration - Matched to hardware (Session 41)
# DO NOT MODIFY without updating simulation ScriptedGaitCfg/CPGCfg

# Gait timing
frequency_hz: 0.4        # Session 41: softer gait (longer cycle reduces impact)
duty_cycle: 0.5          # 50% stance / 50% swing to slow the lift/plant

# Leg trajectory angles (radians)
trajectory:
  swing_thigh: 0.54      # Session 36: -30.65 deg hardware -> +30.65 deg sim
  stance_thigh: 0.67     # Session 36: -38.15 deg hardware -> +38.15 deg sim
  stance_calf: -0.87     # Session 36: 50 deg hardware -> -50 deg sim
  swing_calf: -1.3963    # Session 36: 80 deg hardware -> -80 deg sim
  shoulder_amplitude: 0.0096  # Session 36: 0.55 deg hardware -> 0.0096 rad sim
  thigh_offset_front: 0.05    # Bias front thighs forward (rad)
  thigh_offset_back: -0.05    # Bias rear thighs back (rad)
  stride_scale: 0.35          # Shorter steps to reduce lunge/impact
  calf_lift_scale: 0.85       # Slightly lower lift to soften touchdown
  stride_scale_front: 1.0     # Per-leg scaling (front)
  stride_scale_back: 1.3      # Per-leg scaling (rear)
  calf_lift_scale_front: 1.0  # Per-leg scaling (front)
  calf_lift_scale_back: 1.15  # Per-leg scaling (rear)

# Residual learning
residual_scale: 0.05     # Low residual to preserve hardware gait

# Control loop
control:
  rate_hz: 20            # Control frequency (50ms period)
  action_filter_beta: 0.40  # Session 35: Optimal (0.50 too strong, 0.35 OK but 0.40 best)

# Joint action ranges (for scaling policy output)
joint_range:
  shoulder: 0.30         # ±0.30 rad from default
  thigh: 0.90            # ±0.90 rad from default
  calf: 0.90             # ±0.90 rad from default

# Default joint positions (ready stance) live in config/stance.yaml.
# Do NOT duplicate them here; the runtime loads stance.yaml directly.

# Joint sign for convention conversion (RL <-> Hardware)
# Multiply relative positions by this to convert: rl_rel = hw_rel * joint_sign
joint_sign:
  shoulders: [1.0, -1.0, 1.0, -1.0]  # FL, FR, BL, BR (mirror right side)
  thighs: -1.0           # Inverted
  calves: -1.0           # Inverted
